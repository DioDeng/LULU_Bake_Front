"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[675],{185:function(e,t,i){i.d(t,{Er:function(){return k},FF:function(){return h},Gx:function(){return c},LL:function(){return a},Xr:function(){return s},dK:function(){return l},eT:function(){return o},fc:function(){return u},gF:function(){return d},h$:function(){return m},u1:function(){return p},w0:function(){return g},zO:function(){return f}});var r=i(4335);const n="https://lulubakeapp.zeabur.app",s=e=>r.A.post(`${n}/admin/sign_in`,e),o=()=>r.A.get(`${n}/admin/products`),a=e=>r.A.post(`${n}/admin/product`,e),c=(e,t)=>r.A.patch(`${n}/admin/product/${e}`,t),d=e=>r.A.delete(`${n}/admin/product/${e}`),u=()=>r.A.get(`${n}/orders`),p=(e,t)=>r.A.patch(`${n}/order/${e}`,t),l=()=>r.A.get(`${n}/products`),h=e=>r.A.get(`${n}/order/${e}`),m=e=>r.A.post(`${n}/order`,e),k=e=>r.A.delete(`${n}/order/${e}`),f=e=>r.A.post(`${n}/linepay/${e}`),g=e=>r.A.post(`${n}/upload?type=""`,e)},2675:function(e,t,i){i.r(t),i.d(t,{default:function(){return M}});var r=i(641),n=i(33),s=i(3751);const o={class:"card border-0 h-100"},a={class:"card-body d-flex flex-column"},c={class:"card-title mb-2 text-body-secondary d-flex justify-content-between"},d={key:0,class:"fst-italic text-secondary"},u={key:1,class:"fst-italic text-secondary"},p={key:2,class:"fst-italic text-secondary"},l=["disabled"],h={class:"fst-italic text-secondary"},m={class:"progress mb-3",role:"progressbar","aria-label":"Animated striped example","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100"},k={class:"card-text mb-3"},f={clas:"w-100"},g={key:0,class:"mb-0 text-dark-emphasis"},v={class:"fst-italic text-secondary"},L={class:"fst-italic text-secondary"},$={class:"fst-italic text-secondary"},y={class:"d-flex justify-content-between"},b={class:"fw-bold"},w={class:"fw-bold"},O={class:"card-footer"},C={key:0},x=(0,r.Lk)("i",{class:"bi bi-caret-right-fill text-light px-2"},null,-1),_={key:1},A={key:2};function D(e,t,i,D,S,E){return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.Lk)("div",a,[(0,r.Lk)("h5",c,[(0,r.Lk)("div",null,[(0,r.eW)((0,n.v_)(e.$t("orderView.orderStatus"))+"：",1),25===S.tempData.mealStatus?((0,r.uX)(),(0,r.CE)("span",d,(0,n.v_)(e.$t("orderView.payment")),1)):50===S.tempData.mealStatus?((0,r.uX)(),(0,r.CE)("span",u,(0,n.v_)(e.$t("orderView.diningOut")),1)):((0,r.uX)(),(0,r.CE)("span",p,(0,n.v_)(e.$t("orderView.finish")),1))]),(0,r.Lk)("button",{onClick:t[0]||(t[0]=(0,s.D$)((e=>E.cancleOrder(S.tempData._id)),["prevent"])),class:(0,n.C4)(["card-link h6 text-decoration-underline border-0 bg-body",{"text-decoration-line-through":25!==S.tempData.mealStatus}]),disabled:25!==S.tempData.mealStatus},(0,n.v_)(e.$t("orderView.cancleOrder")),11,l)]),(0,r.Lk)("h6",null,[(0,r.eW)((0,n.v_)(e.$t("shoppingOptions.paymethod"))+"：",1),(0,r.Lk)("span",h,(0,n.v_)(e.$t(S.payMethod)),1)]),(0,r.Lk)("div",m,[(0,r.Lk)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",style:(0,n.Tr)(`width: ${S.tempData.mealStatus}%`)},null,4)]),(0,r.Lk)("div",k,[(0,r.Lk)("ol",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(S.tempData.productList,((t,i)=>((0,r.uX)(),(0,r.CE)("li",{key:i,class:"border-bottom mb-3"},[(0,r.Lk)("div",f,[(0,r.Lk)("h5",{class:(0,n.C4)(["mb-0 d-flex justify-content-between align-items-center w-100",{"text-decoration-line-through":100===S.tempData.mealStatus}])},[(0,r.Lk)("div",null,(0,n.v_)(e.$t(t.flavor))+" - $"+(0,n.v_)(t.price)+" X "+(0,n.v_)(t.quantity),1),(0,r.Lk)("div",null,"$"+(0,n.v_)(t.price*t.quantity),1)],2),"drink"===t.type||"coffee"===t.type?((0,r.uX)(),(0,r.CE)("p",g,[(0,r.eW)((0,n.v_)(e.$t("orderView.size"))+":",1),(0,r.Lk)("span",v,(0,n.v_)(t.size),1),(0,r.eW)(", "+(0,n.v_)(e.$t("orderView.ice"))+":",1),(0,r.Lk)("span",L,(0,n.v_)(e.$t(S.iceList[t.ice].title)),1),(0,r.eW)(", "+(0,n.v_)(e.$t("orderView.sugar"))+":",1),(0,r.Lk)("span",$,(0,n.v_)(e.$t(S.sugarList[t.sugar].title)),1)])):(0,r.Q3)("",!0)])])))),128))]),(0,r.Lk)("div",y,[(0,r.Lk)("h4",b,(0,n.v_)(e.$t("orderView.total"))+"：",1),(0,r.Lk)("h4",w,"$"+(0,n.v_)(e.$toCurrency(S.amount)),1)])]),(0,r.Lk)("div",O,[25===S.tempData.mealStatus?((0,r.uX)(),(0,r.CE)("p",C,[(0,r.eW)((0,n.v_)(e.$t("orderView.orderMessage.notPaidYet"))+" ",1),"shoppingOptions.paymethods.linePay"===S.tempData.payMethod?((0,r.uX)(),(0,r.CE)("a",{key:0,href:"#",onClick:t[1]||(t[1]=(0,s.D$)((e=>E.createLinePay(S.tempData._id)),["prevent"]))},[((0,r.uX)(),(0,r.Wv)((0,r.$y)("wired-button"),{class:"bg-dark text-light h4"},{default:(0,r.k6)((()=>[x,(0,r.eW)((0,n.v_)(e.$t("shoppingOptions.checkout")),1)])),_:1}))])):(0,r.Q3)("",!0)])):50===S.tempData.mealStatus?((0,r.uX)(),(0,r.CE)("p",_,(0,n.v_)(e.$t("orderView.orderMessage.eatingOut")),1)):100===S.tempData.mealStatus?((0,r.uX)(),(0,r.CE)("p",A,(0,n.v_)(e.$t("orderView.orderMessage.finishedEating")),1)):(0,r.Q3)("",!0)])])])}i(4114);var S=i(8987),E=i(2582),I=i(5579),X=i(185),V={data(){return{payMethod:"shoppingOptions.paymethods.cash",cookieList:[],tempData:{},iceList:E,sugarList:I,amount:0,tempCookie:""}},methods:{cancleOrder(e){25===this.tempData.mealStatus&&(0,X.Er)(e).then((()=>{const t=this.cookieList.findIndex((t=>t.orderId===e));this.cookieList.splice(t,1),0===this.cookieList.length?S.A.remove("luluBakeOrder"):(this.tempCookie="",this.cookieList.reverse(),this.cookieList.forEach((e=>{this.tempCookie+=`${JSON.stringify(e)};`})),this.tempCookie=this.tempCookie.replace(/.$/,""),S.A.set("luluBakeOrder",this.tempCookie),this.cookieList.reverse(),this.$emitter.emit("getCookieOrder"),this.$router.push(`/order/${this.cookieList[0].cookieId}`),this.$emitter.emit("getOrder",this.cookieList[0].orderId))})).catch((e=>{console.log(e)}))},createLinePay(e){(0,X.zO)(e).then((e=>{window.location.href=e.data.data.web})).catch((e=>{console.log(e)}))}},mounted(){if(this.$emitter.on("getOrderData",(e=>{this.tempData=e,this.payMethod=e.payMethod,this.amount=e.amount})),S.A.get("luluBakeOrder")){const e=S.A.get("luluBakeOrder").split(";");Object.values(e).forEach((e=>{this.cookieList.push(JSON.parse(e))})),this.cookieList.reverse()}}},j=i(6262);const B=(0,j.A)(V,[["render",D]]);var M=B},8987:function(e,t,i){
/*! js-cookie v3.0.5 | MIT */
function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)e[r]=i[r]}return e}i.d(t,{A:function(){return o}});var n={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function s(e,t){function i(i,n,s){if("undefined"!==typeof document){s=r({},t,s),"number"===typeof s.expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in s)s[a]&&(o+="; "+a,!0!==s[a]&&(o+="="+s[a].split(";")[0]));return document.cookie=i+"="+e.write(n,i)+o}}function n(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var i=document.cookie?document.cookie.split("; "):[],r={},n=0;n<i.length;n++){var s=i[n].split("="),o=s.slice(1).join("=");try{var a=decodeURIComponent(s[0]);if(r[a]=e.read(o,a),t===a)break}catch(c){}}return t?r[t]:r}}return Object.create({set:i,get:n,remove:function(e,t){i(e,"",r({},t,{expires:-1}))},withAttributes:function(e){return s(this.converter,r({},this.attributes,e))},withConverter:function(e){return s(r({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var o=s(n,{path:"/"})},2582:function(e){e.exports=JSON.parse('[{"title":"shoppingOptions.drink.iceList.normal"},{"title":"shoppingOptions.drink.iceList.lessIce"},{"title":"shoppingOptions.drink.iceList.lightIce"},{"title":"shoppingOptions.drink.iceList.noIce"},{"title":"shoppingOptions.drink.iceList.warm"},{"title":"shoppingOptions.drink.iceList.hot"}]')},5579:function(e){e.exports=JSON.parse('[{"title":"shoppingOptions.drink.sugarList.standard"},{"title":"shoppingOptions.drink.sugarList.lessSugar"},{"title":"shoppingOptions.drink.sugarList.halfSugar"},{"title":"shoppingOptions.drink.sugarList.lightSugar"},{"title":"shoppingOptions.drink.sugarList.noSugar"}]')}}]);
//# sourceMappingURL=675.393e72af.js.map