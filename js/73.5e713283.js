"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[73],{4073:function(t,e,o){o.r(e),o.d(e,{default:function(){return Ot}});var l=o(6252),s=o(3577);const a={class:"mb-3"},d={class:"d-flex align-items-center justify-content-between"},c=(0,l._)("h4",null,"文章列表",-1),i=(0,l._)("i",{class:"fa-solid fa-plus me-2"},null,-1),r=(0,l._)("label",{for:"inputState",class:"form-label"},[(0,l._)("p",{class:"d-none"},"State"),(0,l._)("select",{id:"inputState",class:"form-select rounded-3 p-2 px-3"},[(0,l._)("option",{selected:""},"新->舊..."),(0,l._)("option",null,"按類別")])],-1),n={class:"row"},u={class:"table"},p=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{scope:"col"},"#"),(0,l._)("th",{scope:"col"},"分類"),(0,l._)("th",{scope:"col"},"品名"),(0,l._)("th",{scope:"col"},"價格"),(0,l._)("th",{scope:"col"},"是否啟用"),(0,l._)("th",{scope:"col"},"修改"),(0,l._)("th",{scope:"col"},"刪除")])],-1),m={scope:"row"},h={key:0,class:"bi bi-check-square-fill text-success-emphasis"},b={key:1,class:"bi bi-dash-square-fill text-danger-emphasis"},_=["onClick"],g=["onClick"];function k(t,e,o,k,f,y){const w=(0,l.up)("AddEdit"),v=(0,l.up)("CheckDelete");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("section",a,[(0,l._)("div",d,[c,(0,l._)("button",{type:"button",class:"btn btn-outline-dark btn-lg rounded-3",onClick:e[0]||(e[0]=t=>y.openModal(!0))},[i,(0,l.Uk)("新增甜點 ")]),r])]),(0,l._)("section",n,[(0,l._)("table",u,[p,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.products,((t,e,o)=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("th",m,(0,s.zw)(o+1),1),(0,l._)("td",null,(0,s.zw)(t.category),1),(0,l._)("td",null,(0,s.zw)(t.title),1),(0,l._)("td",null,(0,s.zw)(t.price),1),(0,l._)("td",null,[t.is_enabled?((0,l.wg)(),(0,l.iD)("i",h)):((0,l.wg)(),(0,l.iD)("i",b))]),(0,l._)("td",null,[(0,l._)("i",{class:"bi bi-pencil-square btn",onClick:e=>y.openModal(!1,t)},null,8,_)]),(0,l._)("td",null,[(0,l._)("i",{class:"bi bi-x-circle btn text-warning-emphasis",onClick:e=>y.checkModel(t)},null,8,g)])])))),128))])])]),(0,l.Wm)(w,{ref:"addedit",product:f.product,onRender:y.getProducts},null,8,["product","onRender"]),(0,l.Wm)(v,{ref:"check",product:f.product,onDelete:y.deleteProduct},null,8,["product","onDelete"])],64)}o(560);var f=o(9963);const y={ref:"addEditModal",class:"modal fade","data-bs-keyboard":"false","data-bs-backdrop":"static",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},w={class:"modal-dialog modal-dialog-centered modal-xl"},v={class:"modal-content"},P={class:"modal-header"},U={class:"modal-title"},x={key:0},D={key:1},C=(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),M={class:"modal-body"},z={class:"row"},$={class:"col-sm-4"},V={class:"form-group mb-4"},S={for:"image"},A=["src"],L=(0,l._)("div",{class:"mb-1"},"多圖新增",-1),E={key:0},H={class:"form-group"},N={for:"imageUrl"},Y=["onUpdate:modelValue"],q=["src"],B={key:0},I={key:1},K={key:1},Z={class:"col-sm-8"},R={class:"form-group mb-3"},T={for:"title"},W={class:"row mb-3"},j={class:"form-group mb-3 col-4"},F={for:"title"},G={class:"form-group mb-3 col-4"},J={for:"title"},O={class:"row"},Q={class:"form-group col-4"},X={for:"category"},tt=(0,l._)("option",{disabled:"",selected:""},"請選擇分類",-1),et=(0,l._)("option",null,"pie",-1),ot=(0,l._)("option",null,"cake",-1),lt=(0,l._)("option",null,"cookie",-1),st=[tt,et,ot,lt],at={class:"form-group col-4"},dt=(0,l._)("div",{class:"mb-1"},"多尺寸新增",-1),ct={key:0},it={class:"mb-1"},rt={class:"form-group"},nt={for:"imageUrl"},ut=["onUpdate:modelValue"],pt={key:0},mt={key:1},ht={key:1},bt={class:"form-group col-4"},_t={for:"unit"},gt=(0,l._)("hr",null,null,-1),kt={class:"form-group mb-3"},ft={class:"form-group mb-3"},yt={class:"form-group"},wt={class:"form-check"},vt={class:"form-check-label",for:"isPublic"},Pt=(0,l._)("span",{class:"d-none"},"是否啟用",-1),Ut={class:"modal-footer"},xt=(0,l._)("div",{class:"spinner-border",role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1),Dt=[xt];function Ct(t,e,o,a,d,c){return(0,l.wg)(),(0,l.iD)("div",y,[(0,l._)("div",w,[(0,l._)("div",v,[(0,l._)("div",P,[(0,l._)("h3",U,[o.isNew?((0,l.wg)(),(0,l.iD)("span",x,"新增產品")):((0,l.wg)(),(0,l.iD)("span",D,"編輯產品"))]),C]),(0,l._)("div",M,[(0,l._)("div",z,[(0,l._)("div",$,[(0,l._)("div",V,[(0,l._)("label",S,[(0,l.Uk)("主要圖片 "),(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":e[0]||(e[0]=t=>d.tempProduct.imageUrl=t)},null,512),[[f.nr,d.tempProduct.imageUrl]])]),(0,l._)("img",{class:"img-fluid",src:d.tempProduct.imageUrl,alt:""},null,8,A)]),L,Array.isArray(d.tempProduct.imagesUrl)?((0,l.wg)(),(0,l.iD)("div",E,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.tempProduct.imagesUrl,((t,e)=>((0,l.wg)(),(0,l.iD)("div",{class:"mb-1",key:e},[(0,l._)("div",H,[(0,l._)("label",N,[(0,l.Uk)("圖片網址 "),(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":t=>d.tempProduct.imagesUrl[e]=t},null,8,Y),[[f.nr,d.tempProduct.imagesUrl[e]]])])]),(0,l._)("img",{class:"img-fluid",src:t,alt:""},null,8,q)])))),128)),!d.tempProduct.imagesUrl.length||d.tempProduct.imagesUrl[d.tempProduct.imagesUrl.length-1]?((0,l.wg)(),(0,l.iD)("div",B,[(0,l._)("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[1]||(e[1]=t=>d.tempProduct.imagesUrl.push(""))}," 新增圖片 ")])):((0,l.wg)(),(0,l.iD)("div",I,[(0,l._)("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:e[2]||(e[2]=t=>d.tempProduct.imagesUrl.pop())}," 刪除圖片 ")]))])):((0,l.wg)(),(0,l.iD)("div",K,[(0,l._)("button",{class:"btn btn-outline-secondary btn-sm d-block w-100",onClick:e[3]||(e[3]=(...t)=>c.createImages&&c.createImages(...t))}," 新增陣列圖片 ")]))]),(0,l._)("div",Z,[(0,l._)("div",R,[(0,l._)("label",T,[(0,l.Uk)("甜點名稱 "),(0,l.wy)((0,l._)("input",{id:"title","onUpdate:modelValue":e[4]||(e[4]=t=>d.tempProduct.title=t),type:"text",class:"form-control",placeholder:"請輸入名稱"},null,512),[[f.nr,d.tempProduct.title]])])]),(0,l._)("div",W,[(0,l._)("div",j,[(0,l._)("label",F,[(0,l.Uk)("甜點售價 "),(0,l.wy)((0,l._)("input",{id:"title","onUpdate:modelValue":e[5]||(e[5]=t=>d.tempProduct.price=t),type:"number",class:"form-control",placeholder:"請輸入名稱"},null,512),[[f.nr,d.tempProduct.price]])])]),(0,l._)("div",G,[(0,l._)("label",J,[(0,l.Uk)("原始售價 "),(0,l.wy)((0,l._)("input",{id:"title","onUpdate:modelValue":e[6]||(e[6]=t=>d.tempProduct.origin_price=t),type:"number",class:"form-control",placeholder:"請輸入名稱"},null,512),[[f.nr,d.tempProduct.origin_price]])])])]),(0,l._)("div",O,[(0,l._)("div",Q,[(0,l._)("label",X,[(0,l.Uk)("甜點分類 "),(0,l.wy)((0,l._)("select",{class:"form-control","onUpdate:modelValue":e[7]||(e[7]=t=>d.tempProduct.category=t)},st,512),[[f.bM,d.tempProduct.category]])])]),(0,l._)("div",at,[dt,Array.isArray(d.tempProduct.size)?((0,l.wg)(),(0,l.iD)("div",ct,[(0,l._)("div",it,[(0,l._)("div",rt,[(0,l._)("label",nt,[(0,l.Uk)("尺寸or數量 "),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.tempProduct.size,((t,e)=>(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:e,type:"number",class:"form-control","onUpdate:modelValue":t=>d.tempProduct.size[e]=t},null,8,ut)),[[f.nr,d.tempProduct.size[e]]]))),128))])])]),!d.tempProduct.size.length||d.tempProduct.size[d.tempProduct.size.length-1]?((0,l.wg)(),(0,l.iD)("div",pt,[(0,l._)("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[8]||(e[8]=t=>d.tempProduct.size.push(""))}," 新增尺寸 ")])):((0,l.wg)(),(0,l.iD)("div",mt,[(0,l._)("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:e[9]||(e[9]=t=>d.tempProduct.size.pop())}," 刪除尺寸 ")]))])):((0,l.wg)(),(0,l.iD)("div",ht,[(0,l._)("button",{class:"btn btn-outline-secondary btn-sm d-block w-100",onClick:e[10]||(e[10]=(...t)=>c.createSize&&c.createSize(...t))}," 新增陣列尺寸 ")]))]),(0,l._)("div",bt,[(0,l._)("label",_t,[(0,l.Uk)('甜點單位(" g 個) '),(0,l.wy)((0,l._)("input",{id:"unit","onUpdate:modelValue":e[11]||(e[11]=t=>d.tempProduct.unit=t),type:"text",class:"form-control",placeholder:"請輸甜點單位"},null,512),[[f.nr,d.tempProduct.unit]])])])]),gt,(0,l._)("div",kt,[(0,l.Uk)(" 甜點描述 "),(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>d.tempProduct.description=t),type:"text",class:"form-control",placeholder:"甜點描述",style:{height:"150px"}},"\n                ",512),[[f.nr,d.tempProduct.description]])]),(0,l._)("div",ft,[(0,l.Uk)(" 甜點成分 "),(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>d.tempProduct.content=t),type:"text",class:"form-control",placeholder:"甜點成分",style:{height:"150px"}},"\n                ",512),[[f.nr,d.tempProduct.content]])]),(0,l._)("div",yt,[(0,l._)("div",wt,[(0,l._)("label",vt,[Pt,(0,l.wy)((0,l._)("input",{id:"isPublic","onUpdate:modelValue":e[14]||(e[14]=t=>d.tempProduct.is_enabled=t),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[f.e8,d.tempProduct.is_enabled]])]),(0,l.Uk)(" 是否啟用 ")])])])])]),(0,l._)("div",Ut,[(0,l._)("div",{class:(0,s.C_)(["text-center",{"d-none":0==d.loading}])},Dt,2),(0,l._)("button",{type:"button",class:(0,s.C_)(["btn btn-outline-danger me-5",{"d-none":1==d.loading}]),"data-bs-dismiss":"modal"}," 取消 ",2),(0,l._)("button",{type:"button",class:(0,s.C_)(["btn btn-secondary",{"d-none":1==d.loading}]),onClick:e[15]||(e[15]=t=>c.updateProduct(d.tempProduct))}," 確認 ",2)])])])],512)}var Mt=o(7424),zt=o.n(Mt),$t={props:["product","isNew"],data(){return{tempProduct:{},status:"",modal:"",loading:!1,tempTime:""}},watch:{product(){this.tempProduct=this.product},loading(){this.status=this.loading}},mounted(){this.modal=new(zt())(this.$refs.addEditModal)},methods:{createImages(){this.tempProduct.imagesUrl=[""]},createSize(){this.tempProduct.size=[""]},updateProduct(t){this.loading=!0;let e="/api/admin/product",o="post";t.id&&(e=`/api/https://vue3-course-api.hexschool.io/admin/product/${t.id}`,o="put"),this.$http[o](e,{data:t}).then((t=>{t.data.success?(this.$emit("render"),this.loading=!1,this.hideModal()):(alert(t.data.message),this.loading=!1)})).catch((t=>{console.log(t)}))},openModal(){this.modal.show()},hideModal(){this.modal.hide()}}},Vt=o(3744);const St=(0,Vt.Z)($t,[["render",Ct]]);var At=St;const Lt={class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",ref:"checkModal"},Et={class:"modal-dialog"},Ht={class:"modal-content"},Nt={class:"modal-header"},Yt={class:"modal-title fs-5",id:"staticBackdropLabel"},qt=(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Bt={class:"modal-body"},It={class:"modal-body"},Kt=["src"],Zt={class:"modal-footer"},Rt=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);function Tt(t,e,o,a,d,c){return(0,l.wg)(),(0,l.iD)("div",Lt,[(0,l._)("div",Et,[(0,l._)("div",Ht,[(0,l._)("div",Nt,[(0,l._)("h1",Yt,(0,s.zw)(o.product.title),1),qt]),(0,l._)("div",Bt,(0,s.zw)(o.product.content),1),(0,l._)("div",It,(0,s.zw)(o.product.description),1),(0,l._)("img",{src:o.product.imageUrl,alt:""},null,8,Kt),(0,l._)("div",Zt,[Rt,(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=e=>t.$emit("delete",o.product.id))}," 確認刪除 ")])])])],512)}var Wt={data(){return{checkModal:"",status:""}},props:["product"],watch:{loading(){this.status=this.loading}},methods:{openModal(){this.checkModal.show()},hideModal(){this.checkModal.hide()}},mounted(){this.checkModal=new(zt())(this.$refs.checkModal)}};const jt=(0,Vt.Z)(Wt,[["render",Tt]]);var Ft=jt,Gt={data(){return{products:[],product:{},checkSuccess:!1,modle:""}},components:{CheckDelete:Ft,AddEdit:At},methods:{checkLogin(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)LuluBakeToken\s*=\s*([^;]*).*$)|^.*$/,"$1");if(t){this.$http.defaults.headers.common.Authorization=`${t}`;const e="https://vue3-course-api.hexschool.io/api/user/check";this.$http.post(e,{api_token:this.token}).then((t=>{t.data.success?(this.checkSuccess=!0,this.getProducts()):(alert(t.data.message),this.$router.push("/login"))}))}else alert("您尚未登入。"),this.$router.push("/login")},getProducts(){const t="https://vue3-course-api.hexschool.io/api/bake/admin/products/all";this.$http.get(t).then((t=>{this.products=t.data.products}))},checkModel(t,e){this.product=t,e?this.$refs.addedit.openModal():this.$refs.check.openModal()},openModal(t,e){this.isNew=t,this.isNew?this.product={imagesUrl:[],size:[]}:this.product={...e},this.$refs.addedit.openModal()},deleteProduct(t){const e=`https://vue3-course-api.hexschool.io/api/bake/admin/product/${t}`;this.$http.delete(e).then((t=>{console.log(t),this.getProducts()}))}},mounted(){}};const Jt=(0,Vt.Z)(Gt,[["render",k]]);var Ot=Jt}}]);
//# sourceMappingURL=73.5e713283.js.map