"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[675],{185:function(t,e,i){i.d(e,{Er:function(){return h},FF:function(){return u},Gx:function(){return c},LL:function(){return a},Xr:function(){return n},dK:function(){return p},eT:function(){return o},gF:function(){return d},h$:function(){return l},w0:function(){return k},zO:function(){return m}});var r=i(4335);const s="http://127.0.0.1:3000",n=t=>r.A.post(`${s}/admin/sign_in`,t),o=()=>r.A.get(`${s}/admin/products`),a=t=>r.A.post(`${s}/admin/product`,t),c=(t,e)=>r.A.patch(`${s}/admin/product/${t}`,e),d=t=>r.A.delete(`${s}/admin/product/${t}`),p=()=>r.A.get(`${s}/products`),u=t=>r.A.get(`${s}/order/${t}`),l=t=>r.A.post(`${s}/order`,t),h=t=>r.A.delete(`${s}/order/${t}`),m=t=>r.A.post(`${s}/linepay/${t}`),k=t=>r.A.post(`${s}/upload?type=""`,t)},2675:function(t,e,i){i.r(e),i.d(e,{default:function(){return M}});var r=i(641),s=i(33),n=i(3751);const o={class:"card border-0 h-100"},a={class:"card-body d-flex flex-column"},c={class:"card-title mb-2 text-body-secondary d-flex justify-content-between"},d={key:0,class:"fst-italic text-secondary"},p={key:1,class:"fst-italic text-secondary"},u={key:2,class:"fst-italic text-secondary"},l=["disabled"],h={class:"fst-italic text-secondary"},m={class:"progress mb-3",role:"progressbar","aria-label":"Animated striped example","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100"},k={class:"card-text mb-3"},f={clas:"w-100"},g={key:0,class:"mb-0 text-dark-emphasis"},v={class:"fst-italic text-secondary"},L={class:"fst-italic text-secondary"},$={class:"fst-italic text-secondary"},y={class:"d-flex justify-content-between"},b={class:"fw-bold"},w={class:"fw-bold"},O={class:"card-footer"},C={key:0},x=(0,r.Lk)("i",{class:"bi bi-caret-right-fill text-light px-2"},null,-1),_={key:1},D={key:2};function A(t,e,i,A,S,E){return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.Lk)("div",a,[(0,r.Lk)("h5",c,[(0,r.Lk)("div",null,[(0,r.eW)((0,s.v_)(t.$t("orderView.orderStatus"))+"：",1),25===S.tempData.mealStatus?((0,r.uX)(),(0,r.CE)("span",d,(0,s.v_)(t.$t("orderView.payment")),1)):50===S.tempData.mealStatus?((0,r.uX)(),(0,r.CE)("span",p,(0,s.v_)(t.$t("orderView.diningOut")),1)):((0,r.uX)(),(0,r.CE)("span",u,(0,s.v_)(t.$t("orderView.finish")),1))]),(0,r.Lk)("button",{onClick:e[0]||(e[0]=(0,n.D$)((t=>E.cancleOrder(S.tempData._id)),["prevent"])),class:(0,s.C4)(["card-link h6 text-decoration-underline border-0 bg-body",{"text-decoration-line-through":25!==S.tempData.mealStatus}]),disabled:25!==S.tempData.mealStatus},(0,s.v_)(t.$t("orderView.cancleOrder")),11,l)]),(0,r.Lk)("h6",null,[(0,r.eW)((0,s.v_)(t.$t("shoppingOptions.paymethod"))+"：",1),(0,r.Lk)("span",h,(0,s.v_)(t.$t(S.payMethod)),1)]),(0,r.Lk)("div",m,[(0,r.Lk)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",style:(0,s.Tr)(`width: ${S.tempData.mealStatus}%`)},null,4)]),(0,r.Lk)("div",k,[(0,r.Lk)("ol",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(S.tempData.productList,((e,i)=>((0,r.uX)(),(0,r.CE)("li",{key:i,class:"border-bottom mb-3"},[(0,r.Lk)("div",f,[(0,r.Lk)("h5",{class:(0,s.C4)(["mb-0 d-flex justify-content-between align-items-center w-100",{"text-decoration-line-through":100===S.tempData.mealStatus}])},[(0,r.Lk)("div",null,(0,s.v_)(t.$t(e.flavor))+" - $"+(0,s.v_)(e.price)+" X "+(0,s.v_)(e.quantity),1),(0,r.Lk)("div",null,"$"+(0,s.v_)(e.price*e.quantity),1)],2),"drink"===e.type||"coffee"===e.type?((0,r.uX)(),(0,r.CE)("p",g,[(0,r.eW)((0,s.v_)(t.$t("orderView.size"))+":",1),(0,r.Lk)("span",v,(0,s.v_)(e.size),1),(0,r.eW)(", "+(0,s.v_)(t.$t("orderView.ice"))+":",1),(0,r.Lk)("span",L,(0,s.v_)(t.$t(S.iceList[e.ice].title)),1),(0,r.eW)(", "+(0,s.v_)(t.$t("orderView.sugar"))+":",1),(0,r.Lk)("span",$,(0,s.v_)(t.$t(S.sugarList[e.sugar].title)),1)])):(0,r.Q3)("",!0)])])))),128))]),(0,r.Lk)("div",y,[(0,r.Lk)("h4",b,(0,s.v_)(t.$t("orderView.total"))+"：",1),(0,r.Lk)("h4",w,"$"+(0,s.v_)(t.$toCurrency(S.amount)),1)])]),(0,r.Lk)("div",O,[25===S.tempData.mealStatus?((0,r.uX)(),(0,r.CE)("p",C,[(0,r.eW)((0,s.v_)(t.$t("orderView.orderMessage.notPaidYet"))+" ",1),"shoppingOptions.paymethods.linePay"===S.tempData.payMethod?((0,r.uX)(),(0,r.CE)("a",{key:0,href:"#",onClick:e[1]||(e[1]=(0,n.D$)((t=>E.createLinePay(S.tempData._id)),["prevent"]))},[((0,r.uX)(),(0,r.Wv)((0,r.$y)("wired-button"),{class:"bg-dark text-light h4"},{default:(0,r.k6)((()=>[x,(0,r.eW)((0,s.v_)(t.$t("shoppingOptions.checkout")),1)])),_:1}))])):(0,r.Q3)("",!0)])):50===S.tempData.mealStatus?((0,r.uX)(),(0,r.CE)("p",_,(0,s.v_)(t.$t("orderView.orderMessage.eatingOut")),1)):100===S.tempData.mealStatus?((0,r.uX)(),(0,r.CE)("p",D,(0,s.v_)(t.$t("orderView.orderMessage.finishedEating")),1)):(0,r.Q3)("",!0)])])])}i(4114);var S=i(8987),E=i(2582),I=i(5579),X=i(185),V={data(){return{payMethod:"shoppingOptions.paymethods.cash",cookieList:[],tempData:{},iceList:E,sugarList:I,amount:0,tempCookie:""}},methods:{cancleOrder(t){25===this.tempData.mealStatus&&(0,X.Er)(t).then((()=>{const e=this.cookieList.findIndex((e=>e.orderId===t));this.cookieList.splice(e,1),0===this.cookieList.length?S.A.remove("luluBakeOrder"):(this.tempCookie="",this.cookieList.reverse(),this.cookieList.forEach((t=>{this.tempCookie+=`${JSON.stringify(t)};`})),this.tempCookie=this.tempCookie.replace(/.$/,""),S.A.set("luluBakeOrder",this.tempCookie),this.cookieList.reverse(),this.$emitter.emit("getCookieOrder"),this.$router.push(`/order/${this.cookieList[0].cookieId}`),this.$emitter.emit("getOrder",this.cookieList[0].orderId))})).catch((t=>{console.log(t)}))},createLinePay(t){(0,X.zO)(t).then((t=>{window.location.href=t.data.data.web})).catch((t=>{console.log(t)}))}},mounted(){if(this.$emitter.on("getOrderData",(t=>{this.tempData=t,this.payMethod=t.payMethod,this.amount=t.amount})),S.A.get("luluBakeOrder")){const t=S.A.get("luluBakeOrder").split(";");Object.values(t).forEach((t=>{this.cookieList.push(JSON.parse(t))})),this.cookieList.reverse()}}},j=i(6262);const B=(0,j.A)(V,[["render",A]]);var M=B},8987:function(t,e,i){
/*! js-cookie v3.0.5 | MIT */
function r(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)t[r]=i[r]}return t}i.d(e,{A:function(){return o}});var s={read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function n(t,e){function i(i,s,n){if("undefined"!==typeof document){n=r({},e,n),"number"===typeof n.expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in n)n[a]&&(o+="; "+a,!0!==n[a]&&(o+="="+n[a].split(";")[0]));return document.cookie=i+"="+t.write(s,i)+o}}function s(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var i=document.cookie?document.cookie.split("; "):[],r={},s=0;s<i.length;s++){var n=i[s].split("="),o=n.slice(1).join("=");try{var a=decodeURIComponent(n[0]);if(r[a]=t.read(o,a),e===a)break}catch(c){}}return e?r[e]:r}}return Object.create({set:i,get:s,remove:function(t,e){i(t,"",r({},e,{expires:-1}))},withAttributes:function(t){return n(this.converter,r({},this.attributes,t))},withConverter:function(t){return n(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var o=n(s,{path:"/"})},2582:function(t){t.exports=JSON.parse('[{"title":"shoppingOptions.drink.iceList.normal"},{"title":"shoppingOptions.drink.iceList.lessIce"},{"title":"shoppingOptions.drink.iceList.lightIce"},{"title":"shoppingOptions.drink.iceList.noIce"},{"title":"shoppingOptions.drink.iceList.warm"},{"title":"shoppingOptions.drink.iceList.hot"}]')},5579:function(t){t.exports=JSON.parse('[{"title":"shoppingOptions.drink.sugarList.standard"},{"title":"shoppingOptions.drink.sugarList.lessSugar"},{"title":"shoppingOptions.drink.sugarList.halfSugar"},{"title":"shoppingOptions.drink.sugarList.lightSugar"},{"title":"shoppingOptions.drink.sugarList.noSugar"}]')}}]);
//# sourceMappingURL=675.6a64525f.js.map