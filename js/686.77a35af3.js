"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[686],{1227:function(t,e,a){a.d(e,{g:function(){return s}});const s=()=>{const t=document.cookie.replace(/(?:(?:^|.*;\s*)LULU-Bake-Admin\s*=\s*([^;]*).*$)|^.*$/,"$1");return t}},1897:function(t,e,a){a.r(e),a.d(e,{default:function(){return Gt}});var s=a(641),i=a(33),l=a(3751);const o=t=>((0,s.Qi)("data-v-d48a05dc"),t=t(),(0,s.jt)(),t),d={class:"row overflow-scroll"},r={class:"card border-dark sticky-top w-100 paperDarkBg"},c={class:"card-body d-flex align-items-start justify-content-between"},n=(0,s.Fv)('<div class="h5 me-3 mt-auto d-flex align-items-center mb-0" data-v-d48a05dc><small class="text-secondary" data-v-d48a05dc>2025/01/01</small><i class="bi bi-caret-right-fill h6 mb-0 mx-2" data-v-d48a05dc></i><small class="text-secondary" data-v-d48a05dc>2025/01/01</small>, <small class="ms-3 text-secondary" data-v-d48a05dc>today</small><i class="bi bi-caret-down-fill h6 mb-0" data-v-d48a05dc></i></div>',1),p={class:"card border-dark"},u={class:"card-body"},k={class:"table align-middle table-hover"},L=o((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{scope:"col",style:{width:"25%"}},"Customer"),(0,s.Lk)("th",{scope:"col",style:{width:"25%"}},"Product List"),(0,s.Lk)("th",{scope:"col",style:{width:"10%"}},"Total"),(0,s.Lk)("th",{scope:"col",style:{width:"15%"}},[(0,s.eW)("Add to Cart"),(0,s.Lk)("br"),(0,s.eW)("Check-out")]),(0,s.Lk)("th",{scope:"col",style:{width:"15%"}},"View"),(0,s.Lk)("th",{scope:"col",style:{width:"10%"}},"Status")])],-1))),h={class:"d-flex align-items-center"},m={class:"test"},g={class:"fst-italic fw-bolder"},b={class:"text-secondary fw-bolder"},v={key:0},y={class:"text-secondary fw-bolder"},f={class:"text-secondary fw-bolder"},$=["onClick"],C=o((()=>(0,s.Lk)("i",{class:"bi bi-pencil"},null,-1))),x=[C],O=["value","onChange"],_=o((()=>(0,s.Lk)("option",{value:"25"},"UNPAID",-1))),w=o((()=>(0,s.Lk)("option",{value:"50"},"PAID",-1))),S=o((()=>(0,s.Lk)("option",{value:"100"},"DONE",-1))),A=[_,w,S];function E(t,e,a,o,C,_){const w=(0,s.g2)("AddEditModal"),S=(0,s.g2)("InfoModal");return(0,s.uX)(),(0,s.CE)("section",d,[(0,s.bF)(w,{ref:"addEdit"},null,512),(0,s.bF)(S,{ref:"infoModal"},null,512),(0,s.Lk)("div",r,[(0,s.Lk)("div",c,[n,(0,s.Lk)("div",null,[(0,s.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=t=>this.$refs.addEdit.toggleModal())}," Ordering at the counter ")])])]),(0,s.Lk)("div",p,[(0,s.Lk)("div",u,[(0,s.Lk)("table",k,[L,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(C.orderList,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e._id},[(0,s.Lk)("th",null,[(0,s.Lk)("div",h,(0,i.v_)(e._id),1)]),(0,s.Lk)("td",null,[(0,s.Lk)("ol",m,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.productList,((e,a)=>((0,s.uX)(),(0,s.CE)("li",{key:a,class:"py-3"},[(0,s.Lk)("span",g,(0,i.v_)(t.$t(e.flavor)),1),(0,s.eW)("-"),(0,s.Lk)("span",b,(0,i.v_)(e.quantity),1),"drink"===e.type||"coffee"===e.type?((0,s.uX)(),(0,s.CE)("div",v,[(0,s.eW)(" ice:"),(0,s.Lk)("span",y,(0,i.v_)(t.$t(C.iceList[e.ice].title)),1),(0,s.eW)(",sugar:"),(0,s.Lk)("span",f,(0,i.v_)(t.$t(C.iceList[e.sugar].title)),1)])):(0,s.Q3)("",!0)])))),128))])]),(0,s.Lk)("td",null,"$"+(0,i.v_)(t.$toCurrency(e.amount)),1),(0,s.Lk)("td",null,(0,i.v_)(e.createTime.split("T")[0])+" "+(0,i.v_)(e.createTime.split("T")[1].replace(/\.\d+Z$/,"")),1),(0,s.Lk)("td",null,[(0,s.Lk)("a",{href:"#",onClick:(0,l.D$)((t=>this.$refs.infoModal.getOrder(e._id)),["prevent"])},x,8,$)]),(0,s.Lk)("td",null,[(0,s.Lk)("select",{class:(0,i.C4)(["form-select text-light",{"bg-warn":25===e.mealStatus,"bg-info":50===e.mealStatus,"bg-gary":100===e.mealStatus}]),"aria-label":"Default select example",value:e.mealStatus,onChange:t=>_.updateMealStatus(e._id,t)},A,42,O)])])))),128))])])])])])}a(4114);var I=a(2582),B=a(5579);const M={class:"card-body"},U={class:"modal fade",ref:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},D={class:"modal-dialog modal-dialog-centered modal-xl"},X={class:"modal-content rounded-0 border-2 border-dark"},W=(0,s.Lk)("div",{class:"modal-header paperDarkBg border-bottom border-dark"},[(0,s.Lk)("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"}," ADD NEW Order "),(0,s.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),F={class:"modal-body p-0 paperDarkBg"},q={class:"row"},T={class:"col-7"},z={class:"col-5"};function N(t,e,a,i,l,o){const d=(0,s.g2)("Chartlist"),r=(0,s.g2)("Options");return(0,s.uX)(),(0,s.CE)("div",M,[(0,s.Lk)("div",U,[(0,s.Lk)("div",D,[(0,s.Lk)("div",X,[W,(0,s.Lk)("div",F,[(0,s.Lk)("div",q,[(0,s.Lk)("div",T,[(0,s.bF)(d,{cookieData:l.cartList,productList:l.productList},null,8,["cookieData","productList"])]),(0,s.Lk)("div",z,[(0,s.bF)(r,{productList:l.productList,onAddToCart:o.addToCart},null,8,["productList","onAddToCart"])])])])])])],512)])}var Q=a(8987),j=a(185),V=a(7162),K=a(5681),P=a(7430),J={data(){return{staticBackdrop:"",cartList:[],productList:[],tempCookie:""}},components:{Options:V.A,Chartlist:K.A},methods:{forceRerender(){this.componentKey+=1},getProducts(){this.$emitter.emit("loadingStatus",!0),(0,j.dK)().then((t=>{this.productList=t.data.data})).catch((t=>{console.log(t)})),this.$emitter.emit("loadingStatus",!1)},addToCart(t){const e=this.cartList.findIndex((e=>e.optionId===t.optionId&&e.ice===t.ice&&e.sugar===t.sugar&&e.size===t.size));if(void 0===Q.A.get("LULUchartList"))Q.A.set("LULUchartList",JSON.stringify({productId:t.productId,optionId:t.optionId,ice:t.ice,sugar:t.sugar,quantity:t.quantity,flavor:t.flavor,size:t.size,price:t.price,type:t.type,name:t.flavor.split(".")[1]}),{expires:7});else if(e>-1)this.tempCookie="",this.cartList[e].quantity+=t.quantity,this.cartList.forEach((t=>{this.tempCookie+=`${JSON.stringify(t)};`})),this.tempCookie=this.tempCookie.replace(/.$/,""),Q.A.set("LULUchartList",this.tempCookie,{expires:7});else{let e=Q.A.get("LULUchartList");e=`${e}; ${JSON.stringify({productId:t.productId,optionId:t.optionId,ice:t.ice,sugar:t.sugar,quantity:t.quantity,flavor:t.flavor,size:t.size,price:t.price,type:t.type,name:t.flavor.split(".")[1]})}`,Q.A.set("LULUchartList",e,{expires:7})}this.getCookie()},toggleModal(){this.staticBackdrop.toggle()},getCookie(){if(this.cartList=[],Q.A.get("LULUchartList")){const t=Q.A.get("LULUchartList").split(";");Object.values(t).forEach((t=>{this.cartList.push(JSON.parse(t))}))}}},mounted(){this.getProducts(),this.getCookie(),this.$emitter.on("getCookie",(()=>{this.getCookie()})),this.staticBackdrop=new P.aF(this.$refs.staticBackdrop),this.$emitter.on("toggleModal",(()=>{this.getCookie(),this.toggleModal()}))}},R=a(6262);const Z=(0,R.A)(J,[["render",N]]);var G=Z;const H=t=>((0,s.Qi)("data-v-58d386b2"),t=t(),(0,s.jt)(),t),Y={class:"modal fade",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"staticBackdrop"},tt={class:"modal-dialog modal-dialog-centered modal-xl"},et={class:"modal-content"},at=H((()=>(0,s.Lk)("div",{class:"modal-header paperDarkBg"},[(0,s.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Modal title"),(0,s.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),st={class:"modal-body"},it={class:"card border-0"},lt={class:"card-body"},ot={class:"card-title mb-2 text-body-secondary d-flex justify-content-between"},dt={key:0,class:"fst-italic text-secondary"},rt={key:1,class:"fst-italic text-secondary"},ct={key:2,class:"fst-italic text-secondary"},nt={class:"mb-2"},pt={class:"fst-italic text-secondary"},ut={class:"fst-italic text-secondary"},kt=H((()=>(0,s.Lk)("a",{href:"#",class:"card-link"},"Card link",-1))),Lt=H((()=>(0,s.Lk)("a",{href:"#",class:"card-link"},"Another link",-1))),ht={class:"table table-bordered border-primary m-0 table-striped"},mt=H((()=>(0,s.Lk)("th",{scope:"col"},"#",-1))),gt={scope:"col"},bt={scope:"col"},vt={scope:"col"},yt={scope:"col"},ft={class:"table-group-divider luluText"},$t={class:"fw-bolder"},Ct={key:0,class:"mb-0 d-md-flex"},xt={class:"text-nowrap mb-0"},Ot={class:"fst-italic text-secondary mb-0"},_t={class:"text-nowrap mb-0 ms-sm-3"},wt={class:"fst-italic text-secondary mb-0"},St={class:"text-nowrap ms-sm-3 mb-0"},At={class:"fst-italic text-secondary"},Et={"aria-label":"..."},It={class:"pagination mb-0 align-items-center"},Bt={class:"page-item"},Mt=["onClick"],Ut={class:""},Dt={class:"mx-2"},Xt={class:"page-item"},Wt=["onClick"],Ft=H((()=>(0,s.Lk)("i",{class:"bi bi-plus-lg"},null,-1))),qt=[Ft],Tt={class:"fw-bold text-secondary"},zt={class:"modal-footer paperDarkBg d-flex justify-content-between"},Nt=H((()=>(0,s.Lk)("div",null,null,-1))),Qt=H((()=>(0,s.Lk)("button",{type:"button",class:"btn btn-primary"},"Save changes",-1)));function jt(t,e,a,o,d,r){return(0,s.uX)(),(0,s.CE)("div",Y,[(0,s.Lk)("div",tt,[(0,s.Lk)("div",et,[at,(0,s.Lk)("div",st,[(0,s.Lk)("div",it,[(0,s.Lk)("div",lt,[(0,s.Lk)("h5",ot,[(0,s.Lk)("div",null,[(0,s.eW)((0,i.v_)(t.$t("orderView.orderStatus"))+"：",1),25===d.tempOrder.mealStatus?((0,s.uX)(),(0,s.CE)("span",dt,(0,i.v_)(t.$t("orderView.payment")),1)):50===d.tempOrder.mealStatus?((0,s.uX)(),(0,s.CE)("span",rt,(0,i.v_)(t.$t("orderView.diningOut")),1)):((0,s.uX)(),(0,s.CE)("span",ct,(0,i.v_)(t.$t("orderView.finish")),1))])]),(0,s.Lk)("h5",nt,[(0,s.eW)((0,i.v_)(t.$t("shoppingOptions.paymethod"))+"：",1),(0,s.Lk)("span",pt,(0,i.v_)(t.$t(d.tempOrder.payMethod)),1)]),(0,s.Lk)("h5",null,[(0,s.eW)((0,i.v_)(t.$t("orderView.total"))+"：",1),(0,s.Lk)("span",ut,"$"+(0,i.v_)(t.$toCurrency(d.tempOrder.amount)),1)]),kt,Lt])]),(0,s.Lk)("table",ht,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[mt,(0,s.Lk)("th",gt,(0,i.v_)(t.$t("shoppingOptions.product")),1),(0,s.Lk)("th",bt,(0,i.v_)(t.$t("shoppingOptions.price")),1),(0,s.Lk)("th",vt,(0,i.v_)(t.$t("shoppingOptions.quantity")),1),(0,s.Lk)("th",yt,(0,i.v_)(t.$t("shoppingOptions.sub")),1)])]),(0,s.Lk)("tbody",ft,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.tempOrder.productList,((e,a)=>((0,s.uX)(),(0,s.CE)("tr",{key:a},[(0,s.Lk)("td",null,(0,i.v_)(a+1),1),(0,s.Lk)("td",null,[(0,s.Lk)("div",$t,(0,i.v_)(t.$t(e.flavor)),1),"drink"===e.type||"coffee"===e.type?((0,s.uX)(),(0,s.CE)("div",Ct,[(0,s.Lk)("p",xt,[(0,s.eW)((0,i.v_)(t.$t("shoppingOptions.size"))+":",1),(0,s.Lk)("span",Ot,(0,i.v_)(e.size),1)]),(0,s.Lk)("p",_t,[(0,s.eW)((0,i.v_)(t.$t("shoppingOptions.drink.ice"))+":",1),(0,s.Lk)("span",wt,(0,i.v_)(t.$t(d.iceList[e.ice].title)),1)]),(0,s.Lk)("p",St,[(0,s.eW)((0,i.v_)(t.$t("shoppingOptions.drink.sugar"))+":",1),(0,s.Lk)("span",At,(0,i.v_)(t.$t(d.sugarList[e.sugar].title)),1)])])):(0,s.Q3)("",!0)]),(0,s.Lk)("td",null,"$"+(0,i.v_)(e.price),1),(0,s.Lk)("td",null,[(0,s.Lk)("nav",Et,[(0,s.Lk)("ul",It,[(0,s.Lk)("li",Bt,[(0,s.Lk)("a",{class:"page-link rounded-0",href:"#",onClick:(0,l.D$)((e=>t.changeQty(a,-1)),["prevent"])}," - ",8,Mt)]),(0,s.Lk)("li",Ut,[(0,s.Lk)("div",Dt,(0,i.v_)(e.quantity),1)]),(0,s.Lk)("li",Xt,[(0,s.Lk)("a",{class:"page-link rounded-0",href:"#",onClick:(0,l.D$)((e=>t.changeQty(a,1)),["prevent"])},qt,8,Wt)])])])]),(0,s.Lk)("td",null,[(0,s.eW)(" $"),(0,s.Lk)("span",Tt,(0,i.v_)(e.price*e.quantity),1)])])))),128))])])]),(0,s.Lk)("div",zt,[25===d.tempOrder.mealStatus?((0,s.uX)(),(0,s.CE)("button",{key:0,type:"button",class:"btn btn-outline-danger","data-bs-dismiss":"modal",onClick:e[0]||(e[0]=(...t)=>r.deleteOrder&&r.deleteOrder(...t))}," delete order ")):(0,s.Q3)("",!0),Nt,Qt])])])],512)}var Vt={data(){return{staticBackdrop:"",tempOrder:{mealStatus:0,payMethod:"shoppingOptions.paymethods.cash",amount:0},iceList:I,sugarList:B}},methods:{getOrder(t){(0,j.FF)(t).then((t=>{this.tempOrder=t.data.data,this.toggleModal()})).catch((t=>{console.log(t)}))},toggleModal(){this.staticBackdrop.toggle()},deleteOrder(){this.$emitter.emit("loadingStatus",!0),(0,j.Er)(this.tempOrder._id).then((()=>{this.$emitter.emit("getAdminOrders")})).catch((t=>{console.log(t),this.$emitter.emit("loadingStatus",!1)}))}},mounted(){this.staticBackdrop=new P.aF(this.$refs.staticBackdrop)}};const Kt=(0,R.A)(Vt,[["render",jt],["__scopeId","data-v-58d386b2"]]);var Pt=Kt,Jt=a(1227),Rt={data(){return{iceList:I,sugarList:B,orderList:[]}},components:{AddEditModal:G,InfoModal:Pt},methods:{getOrders(){this.$emitter.emit("loadingStatus",!0),(0,j.fc)().then((t=>{this.orderList=t.data.data,this.$emitter.emit("loadingStatus",!1)})).catch((t=>{console.log(t),this.$emitter.emit("loadingStatus",!1)}))},checkSignIn(){const t=(0,Jt.g)();t?this.$http.defaults.headers.common.Authorization=`Bearer ${t}`:this.$router.push("/backend")},updateMealStatus(t,e){this.$emitter.emit("loadingStatus",!0),(0,j.u1)(t,{mealStatus:e.target.value}).then((()=>{this.getOrders()})).catch((t=>{console.log(t),this.$emitter.emit("loadingStatus",!1)}))}},mounted(){this.getOrders(),this.$emitter.on("getAdminOrders",(()=>{this.getOrders()}))},created(){this.checkSignIn()}};const Zt=(0,R.A)(Rt,[["render",E],["__scopeId","data-v-d48a05dc"]]);var Gt=Zt}}]);
//# sourceMappingURL=686.77a35af3.js.map